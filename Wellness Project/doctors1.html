<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctors Directory - MindSync</title>
    <style>
        /* Existing CSS unchanged */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f4f8;
            margin: 0;
            padding: 0;
        }
        header { background: linear-gradient(135deg, #74ebd5, #acb6e5); padding: 20px; text-align: center; color: white; }
        .filter { padding: 20px; text-align: center; }
        .filter select { padding: 10px; border-radius: 5px; }
        .doctors-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; padding: 20px; }
        .doctor-card { background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
        .doctor-card img { width: 100%; height: 200px; object-fit: cover; border-radius: 5px; }
        .doctor-card button { padding: 10px; background: #74ebd5; border: none; border-radius: 5px; color: white; cursor: pointer; }
        .doctor-card button:hover { background: #acb6e5; }
        .slideshow { display: none; }
        @media (max-width: 600px) { .doctors-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <header>
        <h1>Doctors Directory</h1>
    </header>
    <main>
        <section class="filter">
            <label for="condition">Filter by Condition:</label>
            <select id="condition" onchange="filterDoctors()">
                <option value="">All</option>
                <option value="Anxiety">Anxiety</option>
                <option value="Depression">Depression</option>
                <option value="ADHD">ADHD</option>
                <option value="PTSD">PTSD</option>
            </select>
        </section>
        <section class="doctors-grid" id="doctorsGrid"></section>
        <section class="slideshow" id="slideshow"></section>
    </main>

    <script>
        const backendUrl = 'http://localhost:5000';
        const userId = localStorage.getItem('userId');

        async function filterDoctors() {
            const condition = document.getElementById('condition').value;
            try {
                const response = await fetch(`${backendUrl}/api/doctors${condition ? `?condition=${condition}` : ''}`);
                const doctors = await response.json();
                const grid = document.getElementById('doctorsGrid');
                grid.innerHTML = '';
                doctors.forEach(doctor => {
                    const card = document.createElement('div');
                    card.className = 'doctor-card';
                    card.innerHTML = `
                        <img src="https://randomuser.me/api/portraits/men/${Math.floor(Math.random() * 100)}.jpg" alt="${doctor.name}">
                        <h3>${doctor.name}</h3>
                        <p>${doctor.title}</p>
                        <p>${doctor.description}</p>
                        <p>Contact: ${doctor.contact}</p>
                        <button onclick="alert('Connecting with ${doctor.name}...')">Connect</button>
                    `;
                    grid.appendChild(card);
                });
                document.getElementById('slideshow').style.display = doctors.length ? 'none' : 'block';
            } catch (err) {
                console.error('Error fetching doctors:', err);
            }
        }

        // Initialize
        if (!userId) {
            alert('Please log in first');
            window.location.href = 'index.html';
        } else {
            filterDoctors();
        }
    </script>
</body>
</html>